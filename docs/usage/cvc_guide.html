<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
  <title>CVC Guide &mdash; Conservator CLI  documentation</title>
    
    <meta name="robots" content="noindex">
  
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Advanced Python API Guide" href="api_advanced.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/conservator-cli-guide.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_quickstart.html">CLI Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_quickstart.html">Python API Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_advanced.html">Advanced Python API Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CVC Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-cvc-without-configuration">Using CVC without configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-json-vs-jsonl-files"><code class="docutils literal notranslate"><span class="pre">index.json</span></code> vs JSONL Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-frames">Adding Frames</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#additional-reference">Additional Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#global-cache">Global Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cloning">Cloning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clone-timeout-workaround">Clone Timeout Workaround</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downloading-frames">Downloading Frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commit-history">Commit History</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-out-a-commit">Checking out a Commit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commit-info">Commit Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#status">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-changes">Current Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#staging-new-images">Staging New Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uploading-and-adding-staged-images">Uploading and Adding Staged Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validating-changes">Validating Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#making-a-commit">Making a Commit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#push-local-commits">Push Local Commits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#publish-upload-commit-push">Publish: Upload, Commit, Push</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pull-local-commits">Pull Local Commits</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="upload_script.html">Conservator Upload Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Conservator CLI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">CVC Guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cvc-guide">
<h1>CVC Guide<a class="headerlink" href="#cvc-guide" title="Permalink to this heading"></a></h1>
<p>Conservator Version Control is a way of downloading and manipulating
datasets from Conservator. A CLI used to be distributed as a separate
<code class="docutils literal notranslate"><span class="pre">cvc.py</span></code> file within every dataset. It is now included in Conservator CLI.</p>
<p>For a list of commands, open a terminal and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conservator cvc --help
</pre></div>
</div>
<p>Don’t worry if that command looks too long. Conservator CLI adds a shortcut
command for all things CVC:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc --help
</pre></div>
</div>
<p>If you don’t have the <code class="docutils literal notranslate"><span class="pre">conservator</span></code> or <code class="docutils literal notranslate"><span class="pre">cvc</span></code> command, please install
the Conservator CLI library by following the <a class="reference internal" href="installation.html"><span class="doc">Installation</span></a> guide.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following operations are supported via CVC:</p>
<blockquote>
<div><ul class="simple">
<li><p>Add frames (JPEG files only)</p></li>
<li><p>Delete frames</p></li>
<li><p>Add annotations</p></li>
<li><p>Add/edit custom dataset/frame metadata</p></li>
<li><p>Adding, removing, or changing associated files</p></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">--help</span></code> option only provides subcommands and options for the command
it immediately follows. To get the options of a subcommand, you must explicitly
type it. For example: <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">upload</span> <span class="pre">--help</span></code>.</p>
</div>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The basic workflow to clone and download a dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc clone DATASET_ID   # clones the dataset repo into a subdirectory
$ cd &quot;DATASET NAME/&quot;     # the dataset is cloned into a directory with the same name,
                         # in the current working directory
$ cvc download           # download media
</pre></div>
</div>
<p>Now, you can make modifications to <code class="docutils literal notranslate"><span class="pre">index.json</span></code> or <code class="docutils literal notranslate"><span class="pre">associated_files</span></code>. In
addition to modifying existing associated files, you can add one or more new
associated files by copying them into the <code class="docutils literal notranslate"><span class="pre">associated_files</span></code> subdirectory.
Then, publish your changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc publish &quot;Your commit message here&quot;
</pre></div>
</div>
<p>If you need to pull remote changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc pull
</pre></div>
</div>
<p>Note that an updated <code class="docutils literal notranslate"><span class="pre">index.json</span></code> file may reference new frames that will have
to be downloaded (using <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">download</span></code>).</p>
<section id="using-cvc-without-configuration">
<h3>Using CVC without configuration<a class="headerlink" href="#using-cvc-without-configuration" title="Permalink to this heading"></a></h3>
<p>If you want to use CVC without creating a configuration, you can provide the
Conservator instance URL and your API key on the command like, like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc clone DATASET_ID --url &lt;CONSERVATOR_URL&gt; --api-key &lt;API_KEY&gt;
$ cd &quot;DATASET NAME/&quot;
$ cvc --url &lt;CONSERVATOR_URL&gt; --api-key &lt;API_KEY&gt; download
</pre></div>
</div>
<p>Note that, when cloning a dataset, the URL and API key must be provided <em>after</em> the dataset id;
for all other operations, they must be <em>before</em> any other parameters, including the command name.</p>
</section>
<section id="index-json-vs-jsonl-files">
<h3><code class="docutils literal notranslate"><span class="pre">index.json</span></code> vs JSONL Files<a class="headerlink" href="#index-json-vs-jsonl-files" title="Permalink to this heading"></a></h3>
<p>Cloning a dataset using <code class="docutils literal notranslate"><span class="pre">cvc</span></code> will create four files that contain the dataset’s metadata:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">index.json</span></code> - Contains all dataset metadata, including details on the dataset itself, details on the dataset’s frames, and details on which videos were used to create the dataset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset.jsonl</span></code> - Contains dataset metadata - e.g. name, any tags applied to the dataset, dataset owner, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">videos.jsonl</span></code> - Contains details of the videos used to create the dataset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frames.jsonl</span></code> - Contains details of the dataset’s frames, including annotations and attributes</p></li>
</ul>
</div></blockquote>
<p>In most cases, if you wish to make changes to your dataset locally and manage those changes via <code class="docutils literal notranslate"><span class="pre">cvc</span></code>, you can
do that by editing <code class="docutils literal notranslate"><span class="pre">index.json</span></code>. Some datasets, howvever, are too large to manage via <code class="docutils literal notranslate"><span class="pre">index.json</span></code>, in which
case the <code class="docutils literal notranslate"><span class="pre">index.json</span></code> file will only contain an error message. Such datasets can be managed and updated using JSONL files.</p>
<p>JSONL is very similar to plain JSON; the main difference being that while a JSON file represents a single JSON object,
a JSONL file contains multiple valid JSON objects - one per line. It is therefore very important, when updating a dataset
by editing JSONL, to ensure that you do not add any additional linebreaks.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If your dataset does not have JSONL files, committing it via the Conservator UI will generate those files, and they will be available the next time you clone or pull the dataset.</p></li>
<li><p>Any changes pushed to a dataset via <code class="docutils literal notranslate"><span class="pre">cvc</span></code> will be reflected in both <code class="docutils literal notranslate"><span class="pre">index.json</span></code> and the relevant JSONL file after the dataset has been pulled.</p></li>
<li><p>If you try to commit and push changes to both <code class="docutils literal notranslate"><span class="pre">index.json</span></code> and one of the JSONL files at the same time, it will fail. You cannot push changes to <code class="docutils literal notranslate"><span class="pre">index.json</span></code> and one of the JSONL files at the same time.</p></li>
</ul>
</div>
</section>
<section id="adding-frames">
<h3>Adding Frames<a class="headerlink" href="#adding-frames" title="Permalink to this heading"></a></h3>
<p>You can stage new frames to be uploaded to a dataset using the <code class="docutils literal notranslate"><span class="pre">stage-image</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc stage-image path/to/some/file.jpg ../some/other/path.jpg etc.jpg
$ cvc stage-image ./someimages/*.jpg
</pre></div>
</div>
<p>This can be reverted using the <code class="docutils literal notranslate"><span class="pre">unstage-image</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc unstage-image path/to/some/file.jpg ../some/other/path.jpg etc.jpg
</pre></div>
</div>
<p>To upload the images, use the <code class="docutils literal notranslate"><span class="pre">upload-images</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc upload-images
</pre></div>
</div>
<p>This will upload the images to Conservator, and add frame data to your local <code class="docutils literal notranslate"><span class="pre">index.json</span></code> or <code class="docutils literal notranslate"><span class="pre">frames.jsonl</span></code> file.
You can edit that data (to add e.g. tags, location, etc.) before committing and pushing it; or, you can upload your images,
commit the changes to <code class="docutils literal notranslate"><span class="pre">index.json</span></code> or <code class="docutils literal notranslate"><span class="pre">frames.jsonl</span></code>, and push them to Conservator in a single step using the <code class="docutils literal notranslate"><span class="pre">publish</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc publish &quot;Uploaded new frames&quot;
</pre></div>
</div>
<p>This will upload the frames to conservator, and also add them to <code class="docutils literal notranslate"><span class="pre">frames.jsonl</span></code>. Then, it
will commit and push the changes to <code class="docutils literal notranslate"><span class="pre">frames.jsonl</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Uploading will also copy staged images alongside other downloaded dataset frames
into the <code class="docutils literal notranslate"><span class="pre">data/</span></code> folder. Use the <code class="docutils literal notranslate"><span class="pre">--skip-copy</span></code> option to not copy frames.
Do not move images manually into the dataset folder, or the data folder.
Also note that, after adding frames, the new frame data will be reflected in both <code class="docutils literal notranslate"><span class="pre">frames.jsonl</span></code> <em>and</em> <code class="docutils literal notranslate"><span class="pre">index.json</span></code>.</p>
</div>
</section>
</section>
<section id="additional-reference">
<h2>Additional Reference<a class="headerlink" href="#additional-reference" title="Permalink to this heading"></a></h2>
<p>For information on any command, use the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option <em>after the command</em>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc download --help
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">--log</span></code> option before any command to set the log-level. For example,
to see debug prints while uploading some frames:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc --log DEBUG upload
</pre></div>
</div>
<p>By default, CVC operates in the current working directory. However, you can add <code class="docutils literal notranslate"><span class="pre">-p</span></code> or
<code class="docutils literal notranslate"><span class="pre">--path</span></code> to work in a different directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc --path &quot;/home/datasets/some other dataset&quot; pull
</pre></div>
</div>
<p>A local dataset directory must contain an <code class="docutils literal notranslate"><span class="pre">index.json</span></code> file to be considered valid.</p>
<p>Datasets are downloaded as <code class="docutils literal notranslate"><span class="pre">git</span></code> repositories. Many <code class="docutils literal notranslate"><span class="pre">cvc</span></code> commands simply wrap <code class="docutils literal notranslate"><span class="pre">git</span></code>
commands. Unfortunately, not many features of <code class="docutils literal notranslate"><span class="pre">git</span></code> are supported by Conservator (such
as branching). For that reason, please avoid using raw <code class="docutils literal notranslate"><span class="pre">git</span></code> commands, and prefer using
<code class="docutils literal notranslate"><span class="pre">cvc</span></code> for everything. There are also plans to transition away from <code class="docutils literal notranslate"><span class="pre">git</span></code>, so getting
used to using <code class="docutils literal notranslate"><span class="pre">cvc</span></code> now will make that transition easier later.</p>
<section id="global-cache">
<h3>Global Cache<a class="headerlink" href="#global-cache" title="Permalink to this heading"></a></h3>
<p>By default, Conservator-CLI uses <code class="docutils literal notranslate"><span class="pre">.cvc/cache</span></code> to store downloaded frames. In some
cases, it can be useful to use a single cache shared across many dataset downloads.
Duplicate frames will not be downloaded twice. To use a global cache, set the <cite>CVC Cache Path</cite>
to an absolute path. This can be done when initially configuring Conservator, or by editing your config:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conservator config edit
</pre></div>
</div>
<p>Be careful, using a global config makes it difficult to clean up downloaded frames from a
single dataset.</p>
</section>
<section id="cloning">
<h3>Cloning<a class="headerlink" href="#cloning" title="Permalink to this heading"></a></h3>
<p>Clone a Dataset from a known ID:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc clone DATASET_ID
</pre></div>
</div>
<p>By default, this will clone the dataset into subdirectory of the current directory,
with the name of the dataset. To clone somewhere else, use the <code class="docutils literal notranslate"><span class="pre">--path</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc clone DATASET_ID --path where/to/clone/
</pre></div>
</div>
<p>This directory should be empty.</p>
<p>If you want to checkout a specific commit after cloning, you can include
the <code class="docutils literal notranslate"><span class="pre">--checkout</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc clone DATASET_ID --checkout COMMIT_HASH
</pre></div>
</div>
<p>You can then use <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">checkout</span> <span class="pre">HEAD</span></code> to return to the most recent commit.</p>
</section>
<section id="clone-timeout-workaround">
<h3>Clone Timeout Workaround<a class="headerlink" href="#clone-timeout-workaround" title="Permalink to this heading"></a></h3>
<p>For larger datasets, you may experience timeouts when trying to clone a dataset.
While Conservator continues to optimize datasets, there is a workaround for some
use cases. Datasets downloaded in this fashion <strong>will not have version control</strong>
and therefore <strong>will not support push and pull</strong> commands. But it can be useful
for downloading frames and annotation data.</p>
<p>First, create a directory to hold your dataset, and enter it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir my_dataset
$ cd my_dataset
</pre></div>
</div>
<p>Then, download the dataset’s latest <code class="docutils literal notranslate"><span class="pre">index.json</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conservator datasets download-index &lt;dataset id&gt;
</pre></div>
</div>
<p>The download may take some time (and a few attempts), but should be successful
far more often than a full clone.</p>
<p>There are some limitations with datasets cloned with this method, as they are not
full git repositories. In general, the only command that will work without error is
<code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">download</span></code>.</p>
</section>
<section id="downloading-frames">
<h3>Downloading Frames<a class="headerlink" href="#downloading-frames" title="Permalink to this heading"></a></h3>
<p>Download all frames from <code class="docutils literal notranslate"><span class="pre">index.json</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc download
</pre></div>
</div>
<p>Frames will be downloaded to the <code class="docutils literal notranslate"><span class="pre">data/</span></code> directory within
the dataset.</p>
<p>You can also include raw image data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc download -r
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc download --include-raw
</pre></div>
</div>
<p>This will download raw tiff images to <code class="docutils literal notranslate"><span class="pre">rawData/</span></code>, if they exist for the dataset.</p>
<p>By default, CVC performs 10 downloads in parallel at a time. For faster connections,
you can increase this number by using the <code class="docutils literal notranslate"><span class="pre">--pool-size</span></code> option (<code class="docutils literal notranslate"><span class="pre">-p</span></code> for short); for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc download --pool-size 50  # download 50 frames at a time
</pre></div>
</div>
<p>When using a global cache, it may be necessary to run the download command using the
<code class="docutils literal notranslate"><span class="pre">-s</span></code> | <code class="docutils literal notranslate"><span class="pre">--symlink</span></code> flag which will create a symlink versus a hard link in the
<code class="docutils literal notranslate"><span class="pre">data/</span></code> directory of the cloned dataset (i.e. if the cache is on a different volume).</p>
<blockquote>
<div><p>$ cvc download -s</p>
</div></blockquote>
</section>
<section id="commit-history">
<h3>Commit History<a class="headerlink" href="#commit-history" title="Permalink to this heading"></a></h3>
<p>Show log of commits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc log
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">checkout</span></code> to view files at a specific commit, or
<code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">show</span></code> to see more info about a specific commit.</p>
</section>
<section id="checking-out-a-commit">
<h3>Checking out a Commit<a class="headerlink" href="#checking-out-a-commit" title="Permalink to this heading"></a></h3>
<p>Checkout a commit hash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc checkout COMMIT_HASH
</pre></div>
</div>
<p>You can also use relative commit references. For example, to
reset to the most recent commit (such as when you want to return after
checking out some other commit):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc checkout &quot;HEAD&quot;
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Checking out a commit is a destructive action. Any local changes will be
overwritten.</p>
</div>
</section>
<section id="commit-info">
<h3>Commit Info<a class="headerlink" href="#commit-info" title="Permalink to this heading"></a></h3>
<p>Shows information on the most recent commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc show
</pre></div>
</div>
<p>You can also view a specific commit by passing its hash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc show COMMIT_HASH
</pre></div>
</div>
</section>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Permalink to this heading"></a></h3>
<p>Print staged images and changed files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc status
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">publish</span></code> to send these changes to Conservator.</p>
</section>
<section id="current-changes">
<h3>Current Changes<a class="headerlink" href="#current-changes" title="Permalink to this heading"></a></h3>
<p>Show changes in <code class="docutils literal notranslate"><span class="pre">index.json</span></code> and <code class="docutils literal notranslate"><span class="pre">associated_files</span></code> since last commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc diff
</pre></div>
</div>
</section>
<section id="staging-new-images">
<h3>Staging New Images<a class="headerlink" href="#staging-new-images" title="Permalink to this heading"></a></h3>
<p>Stage images for uploading:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc stage-image some/path/to/a.jpg
</pre></div>
</div>
<p>All files must be valid JPEG images. You can specify as many paths
as you want, including path wildcards. These images can be uploaded
using the <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">upload-images</span></code> or <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">publish</span></code> commands.</p>
<p>Images can be un-staged using the <code class="docutils literal notranslate"><span class="pre">unstage-images</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc unstage-image some/path/to/a.jpg
</pre></div>
</div>
</section>
<section id="uploading-and-adding-staged-images">
<h3>Uploading and Adding Staged Images<a class="headerlink" href="#uploading-and-adding-staged-images" title="Permalink to this heading"></a></h3>
<p>Upload any staged images, and add them to <code class="docutils literal notranslate"><span class="pre">frames.jsonl</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc upload-images
</pre></div>
</div>
<p>By default, the staged images will also be copied to the local dataset’s <code class="docutils literal notranslate"><span class="pre">data/</span></code>
directory. This way, you don’t need to re-download the frames. To disable the copy,
use the <code class="docutils literal notranslate"><span class="pre">--skip-copy</span></code> option.</p>
</section>
<section id="validating-changes">
<h3>Validating Changes<a class="headerlink" href="#validating-changes" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">index.json</span></code> file in any dataset should match the format expected by
conservator. This format is defined by a JSON schema, and you can validate
locally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc validate
</pre></div>
</div>
<p>This command is also run (and required to pass) before adding or committing
new changes.</p>
</section>
<section id="making-a-commit">
<h3>Making a Commit<a class="headerlink" href="#making-a-commit" title="Permalink to this heading"></a></h3>
<p>Commit changes to <code class="docutils literal notranslate"><span class="pre">index.json</span></code> and <code class="docutils literal notranslate"><span class="pre">associated_files</span></code> with the given commit message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc commit &quot;Your commit message here&quot;
</pre></div>
</div>
<p>This runs <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">validate</span></code> and only commits if the current <code class="docutils literal notranslate"><span class="pre">index.json</span></code> is valid.</p>
</section>
<section id="push-local-commits">
<h3>Push Local Commits<a class="headerlink" href="#push-local-commits" title="Permalink to this heading"></a></h3>
<p>Push your local commits to Conservator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc push
</pre></div>
</div>
</section>
<section id="publish-upload-commit-push">
<h3>Publish: Upload, Commit, Push<a class="headerlink" href="#publish-upload-commit-push" title="Permalink to this heading"></a></h3>
<p>A frequent usage pattern is to upload frames, commit changes to <code class="docutils literal notranslate"><span class="pre">index.json</span></code>,
and push. All three steps can be done with a single command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc publish &quot;Your commit message&quot;
</pre></div>
</div>
<p>If you don’t have any images staged, the upload process will be skipped.
So this is also a suitable replacement for commit, push.
Any modifications or additions to associated files will also be included
in the commit.</p>
</section>
<section id="pull-local-commits">
<h3>Pull Local Commits<a class="headerlink" href="#pull-local-commits" title="Permalink to this heading"></a></h3>
<p>Pull the latest commits, assuming there are no local changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cvc pull
</pre></div>
</div>
<p>This will update <code class="docutils literal notranslate"><span class="pre">index.json</span></code> and the <code class="docutils literal notranslate"><span class="pre">associated_files</span></code> directory.</p>
<p>This won’t download new frames that were added to <code class="docutils literal notranslate"><span class="pre">index.json</span></code>. You
must run <code class="docutils literal notranslate"><span class="pre">cvc</span> <span class="pre">download</span></code> again to get these new frames.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api_advanced.html" class="btn btn-neutral float-left" title="Advanced Python API Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Teledyne FLIR LLC.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  
  <link rel="stylesheet" href="_static/fonts.css">
  <link rel="stylesheet" href="../_static/fonts.css">
  <style>
    /*
     Sidebar header (and topbar for mobile)
     Teledyne FLIR blue
    */
    .wy-side-nav-search, .wy-nav-top {
      background: #0077c0;
    }
    /*!* Sidebar *!*/
    .wy-nav-side {
      background: #404040;
    }

    .rst-content .toctree-wrapper>p.caption, h1, h2, h3, h4, h5, h6, legend {
        margin-top: 0;
        font-weight: 700;
        font-family: "Nunito Sans Regular",Arial,sans-serif;
    }

    .wy-side-nav-search .wy-dropdown>a, .wy-side-nav-search>a {
        padding: 0;
        margin-bottom: .2em;
    }

    .wy-nav-content {
        max-width: 1100px;
    }

    /* Give the nav items a slightly bigger font */
    .wy-menu-vertical a {
      font-size: 105%;
    }

    .wy-side-nav-search>a img.logo {
        width: 240px;
    }

    html {
      font-family: "Nunito Sans Regular",Arial,sans-serif;
      font-size: 14px;
    }

    p {
      font-family: "Nunito Sans Regular",Arial,sans-serif;
      font-size: 14px;
    }

    body {
      font-family: "Nunito Sans Regular",Arial,sans-serif;
      font-size: 14px;
    }

    h1 {
      font-family: "Industry Book","Arial",sans-serif;
      font-size: 22px;
      font-weight: 400;
    }

    h2 {
      font-family: "Industry Book","Arial",sans-serif;
      font-size: 20px;
      font-weight: 400;
    }

    h3 {
      font-family: "Industry Book","Arial",sans-serif;
      font-size: 18px;
      font-weight: 400;
    }

    h4 {
      font-family: "Industry Book","Arial",sans-serif;
      font-size: 16px;
      font-weight: 400;
    }

    h5 {
      font-family: "Industry Book","Arial",sans-serif;
      font-size: 15px;
      font-weight: 400;
    }

    h6 {
      font-family: "Industry Book","Arial",sans-serif;
      font-size: 15px;
      font-weight: 400;
    }

    table {
      width: auto;
      max-width: 900px;
    }

    td:nth-child(even) {
      max-width: 70%;
      white-space: normal !important;
    }

    /* Slightly increase font on inline conde snippets (``my variable``). Default is 75% */
    .rst-content code, .rst-content tt {
        font-size: 80%;
        padding-top: 3px;
        padding-bottom: 2px;
        padding-left: 2px;
        padding-right: 2px;
    }

    /*
     Teledyne FLIR blue
    */
    .wy-nav-content a, .wy-nav-content a:visited {
      color: #0077c0;
    }

    .rst-content .section ul li>*, .rst-content .section ul.simple li ul, .rst-content .section ul, .rst-content .section ul li li {
      margin-top: 4px;
    }

    .rst-content .line-block {
      margin-bottom: 0;
    }

    /* Create three equal columns that floats next to each other */
    .column {
      float: left;
      width: 33.33%;
      padding-bottom: 10px;
      padding-right: 4px;
    }

    /* Clear floats after the columns */
    .row:after {
      content: "";
      display: table;
      clear: both;
    }

    /* Hide breadcrumbs because they do not seem to have any real function */
    body > div > section > div > div > div:nth-child(1) {
        display: none;
    }

    p.caption {
        margin-top: 10px;
    }

    /* Collapsible elements */
    details {
        margin-top: 6px;
        cursor: pointer;
        font-size: 105%;
    }

    :root {
        --sd-color-primary: #0f4b81;
        --sd-color-secondary: #6c757d;
        --sd-color-success: #28a745;
        --sd-color-info: #17a2b8;
        --sd-color-warning: #f0b37e;
        --sd-color-danger: #dc3545;
        --sd-color-light: #f8f9fa;
        --sd-color-muted: #6c757d;
        --sd-color-dark: #212529;
        --sd-color-primary-highlight: #0069d9;
        --sd-color-secondary-highlight: #5c636a;
        --sd-color-success-highlight: #228e3b;
        --sd-color-info-highlight: #148a9c;
        --sd-color-warning-highlight: #cc986b;
        --sd-color-danger-highlight: #bb2d3b;
        --sd-color-light-highlight: #d3d4d5;
        --sd-color-muted-highlight: #5c636a;
        --sd-color-dark-highlight: #1c1f23;
        --sd-color-primary-text: #fff;
        --sd-color-secondary-text: #fff;
        --sd-color-success-text: #fff;
        --sd-color-info-text: #fff;
        --sd-color-warning-text: #212529;
        --sd-color-danger-text: #fff;
        --sd-color-light-text: #212529;
        --sd-color-muted-text: #fff;
        --sd-color-dark-text: #fff;
        --sd-color-shadow: rgba(0, 0, 0, 0.15);
        --sd-color-card-border: rgba(0, 0, 0, 0.125);
        --sd-color-card-border-hover: #0f4b81;
        --sd-color-card-background: transparent;
        --sd-color-card-text: inherit;
        --sd-color-card-header: transparent;
        --sd-color-card-footer: transparent;
        --sd-color-tabs-label-active: #0077c0;
        --sd-color-tabs-label-hover: #0077c0;
        --sd-color-tabs-label-inactive: hsl(0, 0%, 66%);
        --sd-color-tabs-underline-active: #0077c0;
        --sd-color-tabs-underline-hover: rgba(178, 206, 245, 0.62);
        --sd-color-tabs-underline-inactive: transparent;
        --sd-color-tabs-overline: rgb(222, 222, 222);
        --sd-color-tabs-underline: rgb(222, 222, 222);
        --sd-fontsize-tabs-label: 14px
    }

    .sd-tab-set>label {
        font-weight: 400;
    }

    /*.rst-content .toctree-wrapper ul {*/
    /*  padding-bottom: 12px;*/
    /*}*/

  </style>
  </style>


</body>
</html>